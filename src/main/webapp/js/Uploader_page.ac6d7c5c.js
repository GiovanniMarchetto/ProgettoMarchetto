(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Uploader_page"],{"0cb2":function(e,t,n){var a=n("7b0b"),i=Math.floor,r="".replace,o=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,l,u,c){var f=n+e.length,m=l.length,d=s;return void 0!==u&&(u=a(u),d=o),r.call(c,d,(function(a,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(f);case"<":o=u[r.slice(1,-1)];break;default:var s=+r;if(0===s)return a;if(s>m){var c=i(s/10);return 0===c?a:c<=m?void 0===l[c-1]?r.charAt(1):l[c-1]+r.charAt(1):a}o=l[s-1]}return void 0===o?"":o}))}},"137e":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill","first-number":"","last-number":"","prev-text":"Prev","next-text":"Next"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),n("b-col",{staticClass:"my-1",attrs:{sm:"4"}},[n("b-form-group",{attrs:{label:"Per page:","label-for":"per-page-select","label-cols-sm":"3"}},[n("b-form-select",{attrs:{id:"per-page-select",options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1)],1),n("b-table",{attrs:{striped:"","head-variant":"dark","table-variant":"secondary","sticky-header":"600px",responsive:"","current-page":e.currentPage,"per-page":e.perPage,items:e.items,fields:e.fields,"tbody-tr-class":e.highlightNew},scopedSlots:e._u([{key:"cell(logo)",fn:function(t){return[n("b-img",e._b({attrs:{src:""+t.item.logo,alt:"Logo uploader"}},"b-img",e.logoProps,!1))]}},{key:"cell(actions)",fn:function(t){return["listConsumers"===e.details||"listUploaders"===e.details||"listAdministrators"===e.details||"listResume"===e.details?n("b-button",{on:{click:t.toggleDetails}},[e._v(" "+e._s(t.detailsShowing?"Hide":"Show")+" Details ")]):e._e(),"listConsumers"===e.details||"listUploaders"===e.details?n("b-button",{attrs:{variant:"info"},on:{click:function(n){return e.$emit("mostraFiles",t.item.username)}}},[e._v("Mostra File")]):e._e(),"listFilesUploader"===e.details?n("b-button",{on:{click:function(n){return e.$emit("download-file",t.item.id)}}},[e._v(" Download ")]):e._e()]}},{key:"row-details",fn:function(t){return[n("b-card",[n("b-row",{staticClass:"mb-2"},[n("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[n("b",[e._v("Name:")])]),"listResume"===e.details?n("b-col",[e._v(e._s(t.item.nameUploader))]):e._e(),"listConsumers"===e.details||"listUploaders"===e.details||"listAdministrators"===e.details?n("b-col",[e._v(e._s(t.item.name))]):e._e()],1),n("b-row",{staticClass:"mb-2"},[n("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[n("b",[e._v("Email:")])]),"listResume"===e.details?n("b-col",[e._v(e._s(t.item.emailUploader))]):e._e(),"listConsumers"===e.details||"listUploaders"===e.details||"listAdministrators"===e.details?n("b-col",[e._v(e._s(t.item.email))]):e._e()],1)],1)]}}])}),0==e.items.length?n("div",[n("p",[e._v("Nessun elemento")])]):e._e()],1)},i=[],r={name:"Table",props:["items","fields","details"],data:function(){return{currentPage:1,perPage:5,pageOptions:[5,10,15,{value:100,text:"Troppi"}],logoProps:{rounded:"circle"}}},methods:{highlightNew:function(e,t){if(e&&"row"===t)return""===e.dataVisualizzazione?"table-warning":void 0}},computed:{totalRows:function(){return this.items.length}}},o=r,s=(n("2d16"),n("2877")),l=Object(s["a"])(o,a,i,!1,null,"4235dee8",null);t["a"]=l.exports},"14c3":function(e,t,n){var a=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var r=n.call(e,t);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"159b":function(e,t,n){var a=n("da84"),i=n("fdbc"),r=n("17c2"),o=n("9112");for(var s in i){var l=a[s],u=l&&l.prototype;if(u&&u.forEach!==r)try{o(u,"forEach",r)}catch(c){u.forEach=r}}},"17c2":function(e,t,n){"use strict";var a=n("b727").forEach,i=n("a640"),r=n("ae40"),o=i("forEach"),s=r("forEach");e.exports=o&&s?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,n){var a=n("d039"),i=n("b622"),r=n("2d00"),o=i("species");e.exports=function(e){return r>=51||!a((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"25f0":function(e,t,n){"use strict";var a=n("6eeb"),i=n("825a"),r=n("d039"),o=n("ad6d"),s="toString",l=RegExp.prototype,u=l[s],c=r((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=s;(c||f)&&a(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),n=e.flags,a=String(void 0===n&&e instanceof RegExp&&!("flags"in l)?o.call(e):n);return"/"+t+"/"+a}),{unsafe:!0})},"2d16":function(e,t,n){"use strict";n("ab01")},4160:function(e,t,n){"use strict";var a=n("23e7"),i=n("17c2");a({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"4de4":function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").filter,r=n("1dde"),o=n("ae40"),s=r("filter"),l=o("filter");a({target:"Array",proto:!0,forced:!s||!l},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},5319:function(e,t,n){"use strict";var a=n("d784"),i=n("825a"),r=n("50c4"),o=n("a691"),s=n("1d80"),l=n("8aa5"),u=n("0cb2"),c=n("14c3"),f=Math.max,m=Math.min,d=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,n,a){var p=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=a.REPLACE_KEEPS_$0,v=p?"$":"$0";return[function(n,a){var i=s(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i,a):t.call(String(i),n,a)},function(e,a){if(!p&&h||"string"===typeof a&&-1===a.indexOf(v)){var s=n(t,e,this,a);if(s.done)return s.value}var g=i(e),b=String(this),_="function"===typeof a;_||(a=String(a));var x=g.global;if(x){var S=g.unicode;g.lastIndex=0}var w=[];while(1){var C=c(g,b);if(null===C)break;if(w.push(C),!x)break;var I=String(C[0]);""===I&&(g.lastIndex=l(b,r(g.lastIndex),S))}for(var E="",y=0,z=0;z<w.length;z++){C=w[z];for(var $=String(C[0]),k=f(m(o(C.index),b.length),0),L=[],F=1;F<C.length;F++)L.push(d(C[F]));var O=C.groups;if(_){var R=[$].concat(L,k,b);void 0!==O&&R.push(O);var U=String(a.apply(void 0,R))}else U=u($,b,k,L,O,a);k>=y&&(E+=b.slice(y,k)+U,y=k+$.length)}return E+b.slice(y)}]}))},6547:function(e,t,n){var a=n("a691"),i=n("1d80"),r=function(e){return function(t,n){var r,o,s=String(i(t)),l=a(n),u=s.length;return l<0||l>=u?e?"":void 0:(r=s.charCodeAt(l),r<55296||r>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):r:e?s.slice(l,l+2):o-56320+(r-55296<<10)+65536)}};e.exports={codeAt:r(!1),charAt:r(!0)}},8418:function(e,t,n){"use strict";var a=n("c04e"),i=n("9bf2"),r=n("5c6c");e.exports=function(e,t,n){var o=a(t);o in e?i.f(e,o,r(0,n)):e[o]=n}},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},9263:function(e,t,n){"use strict";var a=n("ad6d"),i=n("9f7f"),r=RegExp.prototype.exec,o=String.prototype.replace,s=r,l=function(){var e=/a/,t=/b*/g;return r.call(e,"a"),r.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=i.UNSUPPORTED_Y||i.BROKEN_CARET,c=void 0!==/()??/.exec("")[1],f=l||c||u;f&&(s=function(e){var t,n,i,s,f=this,m=u&&f.sticky,d=a.call(f),p=f.source,h=0,v=e;return m&&(d=d.replace("y",""),-1===d.indexOf("g")&&(d+="g"),v=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,h++),n=new RegExp("^(?:"+p+")",d)),c&&(n=new RegExp("^"+p+"$(?!\\s)",d)),l&&(t=f.lastIndex),i=r.call(m?n:f,v),m?i?(i.input=i.input.slice(h),i[0]=i[0].slice(h),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:l&&i&&(f.lastIndex=f.global?i.index+i[0].length:t),c&&i&&i.length>1&&o.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),e.exports=s},"99af":function(e,t,n){"use strict";var a=n("23e7"),i=n("d039"),r=n("e8b5"),o=n("861d"),s=n("7b0b"),l=n("50c4"),u=n("8418"),c=n("65f0"),f=n("1dde"),m=n("b622"),d=n("2d00"),p=m("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=d>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),b=f("concat"),_=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:r(e)},x=!g||!b;a({target:"Array",proto:!0,forced:x},{concat:function(e){var t,n,a,i,r,o=s(this),f=c(o,0),m=0;for(t=-1,a=arguments.length;t<a;t++)if(r=-1===t?o:arguments[t],_(r)){if(i=l(r.length),m+i>h)throw TypeError(v);for(n=0;n<i;n++,m++)n in r&&u(f,m,r[n])}else{if(m>=h)throw TypeError(v);u(f,m++,r)}return f.length=m,f}})},"9f7f":function(e,t,n){"use strict";var a=n("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a11b:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Eliminazione")]),n("b-container",{attrs:{fluid:""}},[n("h3",[e._v("Elimina attore")]),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.deleteActor(t)}}},[n("label",{attrs:{for:"username"}},[e._v("Username attore da eliminare")]),n("b-form-input",{attrs:{list:"attori-list",id:"username",type:"text",name:"username",placeholder:"username",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("b-form-datalist",{attrs:{id:"attori-list",options:e.attoriOptions}}),n("b-button",{attrs:{type:"submit",variant:"danger"}},[e._v("Elimina utente")])],1),n("p",[e._v(" NB: non puoi cancellare il tuo account ")])],1),"uploader"===e.potere?n("b-container",{attrs:{fluid:""}},[n("h3",[e._v("Elimina file")]),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.deleteFile(t)}}},[n("label",{attrs:{for:"fileId"}},[e._v("Identificativo file da eliminare")]),n("b-form-input",{attrs:{list:"fileId-list",id:"fileId",type:"text",name:"fileId",placeholder:"id file",required:""},model:{value:e.fileId,callback:function(t){e.fileId=t},expression:"fileId"}}),n("b-form-datalist",{attrs:{id:"fileId-list",options:e.fileOptions}}),n("b-button",{attrs:{type:"submit",variant:"danger"}},[e._v("Elimina file")])],1),n("p",[e._v(" NB: puoi cancellare solo i file da te caricati ")])],1):e._e(),n("Spinner",{attrs:{attesa:e.attesa}})],1)},i=[],r=(n("99af"),n("d3b7"),n("6067")),o=n("62c3"),s=n.n(o);s.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken"));var l={name:"Delete",components:{Spinner:r["a"]},props:["potere","attoriOptions","fileOptions"],data:function(){return{username:"",fileId:"",attesa:!1}},methods:{deleteActor:function(){var e=this;this.attesa=!0,s.a.delete("".concat("/api","/attori/delete/").concat(this.username)).then((function(t){e.$emit("delete_username",e.username),e.username="",e.$emit("delete",t.data)})).catch((function(t){e.$emit("delete",t.response.data)})).finally((function(){e.attesa=!1}))},deleteFile:function(){var e=this;this.attesa=!0,s.a.delete("".concat("/api","/files/delete/").concat(this.fileId)).then((function(t){e.$emit("delete_file",e.fileId),e.fileId="",e.$emit("delete",t.data)})).catch((function(t){e.$emit("delete",t.err.response.data)})).finally((function(){e.attesa=!1}))}}},u=l,c=n("2877"),f=Object(c["a"])(u,a,i,!1,null,null,null);t["a"]=f.exports},a37d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[n("b-navbar-brand",{on:{click:function(t){return e.$emit("mostraSezione","")}}},[e._v(e._s(e.potere)+" page")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","")}}},[e._v(e._s(e.nomePrimaLista))]),n("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","secondaLista")}}},[e._v(e._s(e.nomeSecondaLista))]),"administrator"===e.potere?n("b-nav-item-dropdown",{attrs:{text:"Registra utente"}},[n("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","registration"),e.$emit("ruoloForm","administrator")}}},[e._v("Administrator")]),n("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","registration"),e.$emit("ruoloForm","uploader")}}},[e._v("Uploader")])],1):e._e(),"uploader"===e.potere?n("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","registration")}}},[e._v("Creare Consumer")]):e._e(),"consumer"===e.potere?n("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","modInfo")}}},[e._v("Modifica informazioni")]):n("b-nav-item-dropdown",{attrs:{text:"Modifica utente"}},["administrator"===e.potere?n("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","modInfo"),e.$emit("ruoloForm","administrator")}}},[e._v("Administrator")]):e._e(),n("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","modInfo"),e.$emit("ruoloForm","uploader")}}},[e._v("Uploader")]),"uploader"===e.potere?n("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","modInfo"),e.$emit("ruoloForm","consumer")}}},[e._v("Consumer")]):e._e()],1),"uploader"===e.potere?n("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","upload")}}},[e._v("Upload file")]):e._e(),"consumer"!==e.potere?n("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","delete")}}},[e._v("Elimina")]):e._e()],1)],1)],1)},i=[],r={name:"Navbar",props:["potere","nomePrimaLista","nomeSecondaLista"]},o=r,s=n("2877"),l=Object(s["a"])(o,a,i,!1,null,null,null);t["a"]=l.exports},ab01:function(e,t,n){},ac1f:function(e,t,n){"use strict";var a=n("23e7"),i=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,n){"use strict";var a=n("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},afcd:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Modifica informazioni")]),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.modInfo(t)},reset:e.reset}},[n("Credenziali",{directives:[{name:"show",rawName:"v-show",value:"consumer"!=e.potere,expression:"potere != 'consumer'"}],attrs:{required:!1,username:e.username,password:e.password},on:{"change-info":e.change_home}}),n("UserInfo",{attrs:{required:!1,name:e.name,email:e.email},on:{"change-info":e.change_home}}),"uploader"===e.role?n("Logo",{attrs:{required:!1,logo:e.logo},on:{"change-info":e.change_home}}):e._e(),n("b-button",{attrs:{type:"submit",variant:"success"}},[e._v("Modifica informazioni")]),n("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1),n("section",[n("h3",[e._v("Istruzioni per la modifica")]),n("p",[e._v("Inserire i dati da modificare (non si può modificare l'username).")]),n("p",{directives:[{name:"show",rawName:"v-show",value:"consumer"!=e.potere,expression:"potere != 'consumer'"}]},[e._v(" Se si vuole modificare le informazioni di un altro utente immettere l'username. ")])]),n("Spinner",{attrs:{attesa:e.attesa}})],1)},i=[],r=(n("b0c0"),n("d3b7"),n("6067")),o=n("a4e7"),s=n("66e6"),l=n("278f"),u=n("fa7d"),c=n("62c3"),f=n.n(c);f.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken"));var m={name:"ModInfo",mixins:[u["b"]],props:["potere","role"],components:{Credenziali:o["a"],UserInfo:s["a"],Logo:l["a"],Spinner:r["a"]},data:function(){return{attesa:!1}},methods:{modInfo:function(){var e=this;this.attesa=!0,f.a.patch("".concat("/api","/attori/modInfo"),{username:this.username,password:this.password,name:this.name,email:this.email,role:this.role,logo:this.logo}).then((function(t){var n={utente:t.data,role:e.role};e.$emit("modInfo_utente",n),""!==e.username?e.$emit("modInfo","Modifica attore eseguita - "+e.username):e.$emit("modInfo","Modifica delle proprie informazioni eseguita"),e.reset()})).catch((function(t){e.$emit("modInfo",t.response.data)})).finally((function(){e.attesa=!1}))}}},d=m,p=n("2877"),h=Object(p["a"])(d,a,i,!1,null,"b9576780",null);t["a"]=h.exports},baa5:function(e,t,n){var a=n("23e7"),i=n("e58c");a({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},c740:function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").findIndex,r=n("44d2"),o=n("ae40"),s="findIndex",l=!0,u=o(s);s in[]&&Array(1)[s]((function(){l=!1})),a({target:"Array",proto:!0,forced:l||!u},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},cdf3:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Navbar",{attrs:{potere:e.ruolo,nomePrimaLista:"Lista consumer",nomeSecondaLista:"File di un consumer"},on:{mostraSezione:e.showSezione,ruoloForm:e.modificaRuoloForm}}),n("div",{directives:[{name:"show",rawName:"v-show",value:""==e.sezione,expression:"sezione == ''"}]},[n("h2",[e._v("Lista Consumer")]),n("Table",{attrs:{items:e.consumers,fields:e.fieldsListConsumers,details:"listConsumers"},on:{mostraFiles:e.showFiles}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"secondaLista"==e.sezione,expression:"sezione == 'secondaLista'"}]},[n("h2",[e._v("Lista Files di "+e._s(e.consumerScelto))]),n("Table",{attrs:{items:e.filesConsumer,fields:e.fieldsListFileConsumer,details:"listFilesConsumer"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"registration"==e.sezione,expression:"sezione == 'registration'"}]},[n("Registration",{attrs:{potere:e.ruolo,role:"consumer"},on:{registrazione_utente:e.registrazione_utente_home,registrazione:e.showMsg}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"modInfo"==e.sezione,expression:"sezione == 'modInfo'"}]},[n("ModInfo",{attrs:{potere:e.ruolo,role:e.ruoloForm},on:{modInfo_utente:e.modInfo_utente_home,modInfo:e.showMsg}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"upload"==e.sezione,expression:"sezione == 'upload'"}]},[n("Upload",{on:{upload_consumer:e.upload_consumer_home,upload_file:e.upload_file_home,upload:e.showMsg}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"delete"==e.sezione,expression:"sezione == 'delete'"}]},[n("Delete",{attrs:{potere:e.ruolo,attoriOptions:e.attoriOptions,fileOptions:e.fileOptions},on:{delete_file:e.delete_file_home,delete_username:e.delete_username_home,delete:e.showMsg}})],1),n("Messages",{attrs:{msg_success:e.msg_success,msg_error:e.msg_error,msg_warning:e.msg_warning}}),n("Spinner",{attrs:{attesa:e.attesa}})],1)},i=[],r=(n("4de4"),n("c740"),n("4160"),n("b0c0"),n("d3b7"),n("25f0"),n("159b"),n("a37d")),o=n("6067"),s=n("137e"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Caricamento file")]),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.upload(t)},reset:function(t){return t.preventDefault(),e.reset(t)}}},[n("FileInput",{attrs:{file:e.file,nameFile:e.nameFile,hashtag:e.hashtag},on:{"change-info":e.change_home}}),n("legend",[e._v("Dati Consumer")]),n("b-container",{attrs:{fluid:""}},[n("b-form-group",{attrs:{id:"usernameCons-group",label:"Username consumer:","label-for":"usernameCons"}},[n("b-form-input",{attrs:{id:"usernameCons",type:"text",name:"usernameCons",placeholder:"username consume"},model:{value:e.usernameCons,callback:function(t){e.usernameCons=t},expression:"usernameCons"}})],1)],1),n("UserInfo",{attrs:{required:!1,name:e.nameCons,email:e.emailCons},on:{"change-info":e.change_home}}),n("b-button",{attrs:{type:"submit",variant:"success"}},[e._v("Upload")]),n("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1),n("Spinner",{attrs:{attesa:e.attesa}})],1)},u=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-form-group",{attrs:{id:"file-group",label:"File:","label-for":"file"}},[n("b-form-file",{attrs:{id:"file",type:"file",name:"file",required:""},nativeOn:{change:function(t){return e.trasf64(t)}},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),n("b-form-group",{attrs:{id:"nameFile-group",label:"Nome del file:","label-for":"nameFile"}},[n("b-form-input",{attrs:{id:"nameFile",type:"text",name:"nameFile",placeholder:"name of file",required:""},nativeOn:{change:function(t){return e.change_info(t)}},model:{value:e.nameFile,callback:function(t){e.nameFile=t},expression:"nameFile"}})],1),n("b-form-group",{attrs:{id:"hashtag-group",label:"Hashtag:","label-for":"hashtag"}},[n("b-form-input",{attrs:{id:"hashtag",type:"text",name:"hashtag",placeholder:"hashtag"},nativeOn:{change:function(t){return e.change_info(t)}},model:{value:e.hashtag,callback:function(t){e.hashtag=t},expression:"hashtag"}})],1)],1)},f=[],m=(n("baa5"),n("ac1f"),n("5319"),n("fa7d")),d={name:"FileInput",props:["file","nameFile","hashtag"],mixins:[m["a"]],watch:{file:function(){var e={nameProp:"file",valueProp:this.file};this.$emit("change-info",e)}},methods:{trasf64:function(e){var t=this,n=new FileReader;n.onload=function(e){t.file=e.target.result.replace(/^data:.+;base64,/,"")},n.onerror=function(e){console.log("Error: ",e)},n.readAsDataURL(e.target.files[0]);var a=e.target.files[0].name,i=a.lastIndexOf("."),r={nameProp:"extension",valueProp:a.substring(i)};this.$emit("change-info",r)}}},p=d,h=n("2877"),v=Object(h["a"])(p,c,f,!1,null,null,null),g=v.exports,b=n("66e6"),_=n("62c3"),x=n.n(_);null!=localStorage.getItem("jwtToken")&&(x.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken")));var S={name:"Upload",components:{FileInput:g,UserInfo:b["a"],Spinner:o["a"]},data:function(){return{file:"",nameFile:"",hashtag:"",extension:"",usernameCons:"",nameCons:"",emailCons:"",attesa:!1}},methods:{change_home:function(e){var t=e.nameProp,n=e.valueProp;switch(t){case"file":this.file=n;break;case"nameFile":this.nameFile=n;break;case"hashtag":this.hashtag=n;break;case"extension":this.extension=n;break;case"name":this.nameCons=n;break;case"email":this.emailCons=n;break;default:console.log("switch concluso a vuoto");break}},reset:function(){this.file="",this.extension="",this.nameFile="",this.hashtag="",this.usernameCons="",this.nameCons="",this.emailCons=""},upload:function(){var e=this;this.attesa=!0,x.a.post("".concat("/api","/files/upload"),{file:this.file,nameFile:this.nameFile+this.extension,hashtag:this.hashtag,usernameCons:this.usernameCons,nameCons:this.nameCons,emailCons:this.emailCons}).then((function(t){var n={username:e.usernameCons,name:e.nameCons,email:e.emailCons,logo:""};e.$emit("upload_consumer",n);var a=new Date,i={id:t.data,usernameUpl:localStorage.getItem("nomeUtente"),usernameCons:e.usernameCons,name:e.nameFile,dataCaricamento:a.toISOString().substring(0,10),dataVisualizzazione:"",indirizzoIP:"",hashtag:e.hashtag};e.$emit("upload_file",i),e.reset(),e.$emit("upload","Upload file completato ("+t.data+")")})).catch((function(t){e.$emit("upload",t.response.data)})).finally((function(){e.attesa=!1}))}}},w=S,C=Object(h["a"])(w,l,u,!1,null,null,null),I=C.exports,E=n("be26"),y=n("afcd"),z=n("a11b"),$=n("fb85");x.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken"));var k={name:"Uploader_page",components:{Navbar:r["a"],Spinner:o["a"],Table:s["a"],Upload:I,Registration:E["a"],ModInfo:y["a"],Delete:z["a"],Messages:$["a"]},mixins:[m["c"],m["d"]],data:function(){return{ruolo:"uploader",ruoloForm:"",consumerScelto:null,consumers:[],filesUploader:[],filesConsumer:[],fieldsListConsumers:["username","actions"],fieldsListFileConsumer:["id","name",{key:"dataCaricamento",sortable:!0},{key:"dataVisualizzazione",sortable:!0},"indirizzoIP","hashtag"],attesa:!1}},computed:{attoriOptions:function(){var e=[];return this.consumers.forEach((function(t){e.push(t.username)})),e},fileOptions:function(){var e=[];return this.filesUploader.forEach((function(t){e.push(t.id)})),e}},methods:{modificaRuoloForm:function(e){this.ruoloForm=e},showFiles:function(e){this.consumerScelto=e,this.filesConsumer=null,this.filesConsumer=this.filesUploader.filter((function(t){return t.usernameCons===e})),this.sezione="secondaLista"},registrazione_utente_home:function(e){var t=e.username,n=e.name,a=e.email,i=e.logo,r={username:t,name:n,email:a,logo:i};this.consumers.push(r),this.attoriOptions.push(t)},modInfo_utente_home:function(e){var t=e.utente,n=e.role;"consumer"===n&&(this.consumers=this.consumers.filter((function(e){return e.username!==t.username})),this.consumers.push(t))},upload_consumer_home:function(e){var t=e.usernameCons;-1===this.consumers.findIndex((function(e){return e.username===t}))&&(this.consumers.push(e),this.attoriOptions.push(t))},upload_file_home:function(e){this.filesUploader.push(e),e.usernameCons===this.consumerScelto&&this.filesConsumer.push(e),this.fileOptions.push(e.id)},delete_file_home:function(e){this.filesUploader=this.filesUploader.filter((function(t){return t.id!==e})),this.filesConsumer=this.filesConsumer.filter((function(t){return t.id!==e})),this.fileOptions=this.fileOptions.filter((function(t){return t!==e}))},delete_username_home:function(e){this.consumers=this.consumers.filter((function(t){return t.username!==e})),this.attoriOptions=this.attoriOptions.filter((function(t){return t!==e}))}},created:function(){var e=this;this.attesa=!0,x.a.get("".concat("/api","/list/consumers")).then((function(t){return e.consumers=t.data})).catch((function(t){return e.showMsg(t.toString())})),x.a.get("".concat("/api","/list/filesUploader")).then((function(t){return e.filesUploader=t.data})).catch((function(t){return e.showMsg(t.toString())})).finally((function(){e.attesa=!1}))}},L=k,F=Object(h["a"])(L,a,i,!1,null,null,null);t["default"]=F.exports},d784:function(e,t,n){"use strict";n("ac1f");var a=n("6eeb"),i=n("d039"),r=n("b622"),o=n("9263"),s=n("9112"),l=r("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c=function(){return"$0"==="a".replace(/./,"$0")}(),f=r("replace"),m=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),d=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var p=r(e),h=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=h&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!h||!v||"replace"===e&&(!u||!c||m)||"split"===e&&!d){var g=/./[p],b=n(p,""[e],(function(e,t,n,a,i){return t.exec===o?h&&!i?{done:!0,value:g.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),_=b[0],x=b[1];a(String.prototype,e,_),a(RegExp.prototype,p,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}f&&s(RegExp.prototype[p],"sham",!0)}},e58c:function(e,t,n){"use strict";var a=n("fc6a"),i=n("a691"),r=n("50c4"),o=n("a640"),s=n("ae40"),l=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,f=o("lastIndexOf"),m=s("indexOf",{ACCESSORS:!0,1:0}),d=c||!f||!m;e.exports=d?function(e){if(c)return u.apply(this,arguments)||0;var t=a(this),n=r(t.length),o=n-1;for(arguments.length>1&&(o=l(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:u},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=Uploader_page.ac6d7c5c.js.map