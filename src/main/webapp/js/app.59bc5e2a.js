(function(e){function t(t){for(var n,a,i=t[0],u=t[1],l=t[2],c=0,m=[];c<i.length;c++)a=i[c],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&m.push(o[a][0]),o[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);g&&g(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(s.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},a={app:0},o={app:0},s=[];function i(e){return u.p+"js/"+({"Administrator-page":"Administrator-page","Consumer-page~Uploader-page":"Consumer-page~Uploader-page","Consumer-page":"Consumer-page","Uploader-page":"Uploader-page"}[e]||e)+"."+{"Administrator-page":"2bc5249f","Consumer-page~Uploader-page":"8ba177f9","Consumer-page":"5601e142","Uploader-page":"dd059cdd"}[e]+".js"}function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r={"Consumer-page~Uploader-page":1,"Consumer-page":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({"Administrator-page":"Administrator-page","Consumer-page~Uploader-page":"Consumer-page~Uploader-page","Consumer-page":"Consumer-page","Uploader-page":"Uploader-page"}[e]||e)+"."+{"Administrator-page":"31d6cfe0","Consumer-page~Uploader-page":"cae02dfe","Consumer-page":"2e0f5afe","Uploader-page":"31d6cfe0"}[e]+".css",o=u.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],c=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(c===n||c===o))return t()}var m=document.getElementsByTagName("style");for(i=0;i<m.length;i++){l=m[i],c=l.getAttribute("data-href");if(c===n||c===o)return t()}var g=document.createElement("link");g.rel="stylesheet",g.type="text/css",g.onload=t,g.onerror=function(t){var n=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],g.parentNode.removeChild(g),r(s)},g.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(g)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=s);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,u.nc&&c.setAttribute("nonce",u.nc),c.src=i(e);var m=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(g);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;m.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",m.name="ChunkLoadError",m.type=n,m.request=a,r[1](m)}o[e]=void 0}};var g=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(t)},u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var m=0;m<l.length;m++)t(l[m]);var g=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"153e":function(e,t,r){"use strict";r("6d8a")},"278f":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-form-group",{attrs:{id:"logo-group",label:"Logo:","label-for":"logo"}},[r("b-form-file",{attrs:{id:"logo",name:"logo",placeholder:"Choose a file or drop it here...",accept:"image/*"},nativeOn:{change:function(t){return e.trasf64(t)}}}),r("figure",{directives:[{name:"show",rawName:"v-show",value:e.logo,expression:"logo"}]},[r("b-img",{attrs:{id:"anteprima-logo",center:"",rounded:"",src:""+e.logo,alt:"Anteprima Logo"}})],1)],1)],1)},a=[],o={name:"Logo",props:["required","logo"],watch:{logo:function(e){var t={nameProp:"logo",valueProp:e};this.$emit("change-info",t)}},methods:{trasf64:function(e){var t=this,r=new FileReader;r.onload=function(e){t.logo=e.target.result},r.onerror=function(e){console.log("Error: ",e)},r.readAsDataURL(e.target.files[0])}},mounted:function(){this.required&&document.getElementById("logo").setAttribute("required","true")}},s=o,i=(r("3c73"),r("2877")),u=Object(i["a"])(s,n,a,!1,null,null,null);t["a"]=u.exports},"3c07":function(e,t,r){},"3c73":function(e,t,r){"use strict";r("54e0")},"4c80":function(e,t,r){"use strict";r("3c07")},"54e0":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("header",[r("Logout",{directives:[{name:"show",rawName:"v-show",value:!this.$route.path.endsWith("/"),expression:"!this.$route.path.endsWith('/')"}]}),r("h1",{staticStyle:{"margin-bottom":"0"}},[e._v("Progetto Marchetto")])],1),r("router-view")],1)},o=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-button",{staticClass:"btn-logout",on:{click:e.logout}},[e._v("Logout")])},i=[],u={methods:{logout:function(){localStorage.removeItem("jwtToken"),localStorage.removeItem("nomeUtente"),this.$emit("logout"),this.$router.push("/")}}},l=u,c=(r("4c80"),r("2877")),m=Object(c["a"])(l,s,i,!1,null,"51b5ce80",null),g=m.exports,p={name:"App",components:{Logout:g}},d=p,h=(r("034f"),Object(c["a"])(d,a,o,!1,null,null,null)),f=h.exports,v=(r("caad"),r("45fc"),r("d3b7"),r("2532"),r("8c4f")),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:""==e.sezione,expression:"sezione == ''"}]},[r("Login",{on:{login:e.login_home}}),r("b-button",{on:{click:function(t){e.sezione="registration"}}},[e._v("Non hai ancora un account")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"registration"==e.sezione,expression:"sezione == 'registration'"}]},[r("Registration",{attrs:{potere:"consumer",role:"consumer"},on:{registrazione:e.registration_home}}),r("b-button",{on:{click:function(t){e.sezione=""}}},[e._v("Ho giÃ  un account!")])],1),r("Messages",{attrs:{msg_success:e.msg_success,msg_error:e.msg_error,msg_warning:e.msg_warning}})],1)},w=[],_=(r("2ca0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("Login Page")]),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("Credenziali",{attrs:{required:!0,username:e.username,password:e.password},on:{"change-info":e.change_home}}),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Login")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:1==e.attesa,expression:"attesa == true"}]},[r("b-button",{attrs:{block:"",variant:"light",disabled:""}},[r("b-spinner",{attrs:{small:""}}),e._v(" Loading... ")],1)],1)],1)}),y=[],E=(r("25f0"),r("a4e7")),C=r("62c3"),U=r.n(C),k={name:"Login",components:{Credenziali:E["a"]},data:function(){return{username:"",password:"",attesa:!1}},methods:{login:function(){var e=this;this.attesa=!0,U.a.post("".concat("/api","/login"),{username:this.username,password:this.password}).then((function(t){localStorage.setItem("jwtToken",t.data),localStorage.setItem("nomeUtente",e.username),e.$emit("login","Login eseguito da parte di:"+e.username),e.attesa=!1})).catch((function(t){e.$emit("login",t.toString()),e.attesa=!1}))},change_home:function(e){var t=e.nameProp,r=e.valueProp;switch(t){case"username":this.username=r;break;case"password":this.password=r;break;default:break}}}},x=k,$=Object(c["a"])(x,_,y,!1,null,null,null),A=$.exports,O=r("be26"),R=r("fb85"),S=r("fa7d"),j={name:"Home",components:{Login:A,Registration:O["a"],Messages:R["a"]},mixins:[S["c"],S["d"]],methods:{login_home:function(e){var t=this;this.showMsg(e),e.startsWith("ERR")||setTimeout((function(){4==localStorage.getItem("nomeUtente").length?t.$router.push("/uploader-page"):localStorage.getItem("nomeUtente").includes("@")?t.$router.push("/administrator-page"):16==localStorage.getItem("nomeUtente").length?t.$router.push("/consumer-page"):t.showMsg("ERR- Username non riscontrato...")}),1e3)},registration_home:function(e){this.showMsg(e)}}},P=j,q=Object(c["a"])(P,b,w,!1,null,null,null),I=q.exports,L=void 0;n["a"].use(v["a"]);var z=[{path:"/",name:"Home",component:I},{path:"/consumer-page",name:"Consumer-page",meta:{requiresAuth:!0},component:function(){return Promise.all([r.e("Consumer-page~Uploader-page"),r.e("Consumer-page")]).then(r.bind(null,"a566"))}},{path:"/uploader-page",name:"Uploader-page",meta:{requiresAuth:!0},component:function(){return Promise.all([r.e("Consumer-page~Uploader-page"),r.e("Uploader-page")]).then(r.bind(null,"c78d"))}},{path:"/administrator-page",name:"Administrator-page",meta:{requiresAuth:!0},component:function(){return r.e("Administrator-page").then(r.bind(null,"fb90"))}},{path:"*",redirect:"/"}],T=new v["a"]({routes:z});T.beforeEach((function(e,t,r){e.matched.some((function(e){return e.meta.requiresAuth}))?localStorage.getItem("jwtToken")?t.matched.some((function(e){return e.meta.requiresAuth}))?4==localStorage.getItem("nomeUtente").length?L.$router.push("/uploader-page"):localStorage.getItem("nomeUtente").includes("@")?L.$router.push("/administrator-page"):16==localStorage.getItem("nomeUtente").length?L.$router.push("/consumer-page"):L.showMsg("ERR- Username non riscontrato..."):r():r({path:"/",query:{redirect:e.fullPath}}):r()}));var M=T,N=r("aee4");r("b6ad"),r("6210");n["a"].use(N["a"]),n["a"].config.productionTip=!1,new n["a"]({router:M,render:function(e){return e(f)}}).$mount("#app")},"66e6":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-form-group",{attrs:{id:"name-group",label:"Name:","label-for":"name"}},[r("b-form-input",{attrs:{id:"name",type:"text",name:"name",placeholder:"name"},nativeOn:{change:function(t){return e.change_info(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("b-form-group",{attrs:{id:"email-group",label:"Email:","label-for":"email"}},[r("b-form-input",{attrs:{id:"email",type:"email",name:"email",placeholder:"email"},nativeOn:{change:function(t){return e.change_info(t)}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1)},a=[],o=r("fa7d"),s={name:"UserInfo",props:["required","name","email"],mixins:[o["a"]],mounted:function(){this.required&&(document.getElementById("name").setAttribute("required","true"),document.getElementById("email").setAttribute("required","true"))}},i=s,u=r("2877"),l=Object(u["a"])(i,n,a,!1,null,null,null);t["a"]=l.exports},"6d8a":function(e,t,r){},"85ec":function(e,t,r){},a4e7:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-form-group",{attrs:{id:"username-group",label:"Username:","label-for":"username"}},[r("b-form-input",{attrs:{id:"username",type:"text",name:"username",placeholder:"username"},nativeOn:{change:function(t){return e.change_info(t)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("b-form-group",{attrs:{id:"password-group",label:"Password:","label-for":"password"}},[r("b-form-input",{attrs:{id:"password",type:"password",name:"password",placeholder:"password"},nativeOn:{change:function(t){return e.change_info(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)},a=[],o=r("fa7d"),s={name:"Credenziali",props:["required","username","password"],mixins:[o["a"]],mounted:function(){this.required&&(document.getElementById("username").setAttribute("required","true"),document.getElementById("password").setAttribute("required","true"))}},i=s,u=r("2877"),l=Object(u["a"])(i,n,a,!1,null,null,null);t["a"]=l.exports},be26:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"registration"},[r("h2",[e._v("Registration")]),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.registration(t)},reset:e.reset}},[r("Credenziali",{attrs:{required:!0,username:e.username,password:e.password},on:{"change-info":e.change_home}}),r("UserInfo",{attrs:{required:!0,name:e.name,email:e.email},on:{"change-info":e.change_home}}),"uploader"===e.role?r("Logo",{attrs:{required:!0,logo:e.logo},on:{"change-info":e.change_home}}):e._e(),r("b-button",{attrs:{type:"submit",variant:"success"}},[e._v("Registrazione")]),r("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1)],1)},a=[],o=(r("b0c0"),r("2ca0"),r("a4e7")),s=r("66e6"),i=r("278f"),u=r("fa7d"),l=r("62c3"),c=r.n(l);null!=localStorage.getItem("jwtToken")&&(c.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken")));var m={name:"Registration",mixins:[u["b"]],props:["potere","role"],components:{Credenziali:o["a"],UserInfo:s["a"],Logo:i["a"]},data:function(){return{}},methods:{registration:function(){var e=this;"administrator"===this.role&&this.username!==this.email?this.$emit("registrazione","ERR - Gli amministratori devono avere l'email uguale all'username"):c.a.post("".concat("/api","/attori/registration"),{username:this.username,password:this.password,name:this.name,email:this.email,role:this.role,logo:this.logo}).then((function(t){t.data.startsWith("ERR")||e.reset(),e.$emit("registrazione",t.data)})).catch((function(t){e.$emit("registrazione","ERR(esterno) - "+t)}))}}},g=m,p=r("2877"),d=Object(p["a"])(g,n,a,!1,null,null,null);t["a"]=d.exports},fa7d:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s}));r("b0c0"),r("2ca0");var n={data:function(){return{msg_success:"",msg_error:"",msg_warning:""}},methods:{showMsg:function(e){e.startsWith("ERR")||e.startsWith("Err")?(this.msg_error=e,this.$bvToast.show("msg_e")):e.startsWith("WARN")?(this.msg_warning=e,this.$bvToast.show("msg_w")):(this.msg_success=e,this.$bvToast.show("msg_s"))}}},a={data:function(){return{sezione:""}},methods:{showSezione:function(e){this.sezione=e}}},o={data:function(){return{username:"",password:"",name:"",email:"",logo:""}},methods:{change_home:function(e){var t=e.nameProp,r=e.valueProp;switch(t){case"username":this.username=r;break;case"password":this.password=r;break;case"name":this.name=r;break;case"email":this.email=r;break;case"role":this.role=r;break;case"logo":this.logo=r;break;default:console.log("switch concluso a vuoto");break}},reset:function(){this.username="",this.password="",this.name="",this.email="",this.logo=""}}},s={methods:{change_info:function(e){var t={nameProp:e.target.name,valueProp:e.target.value};this.$emit("change-info",t)}}}},fb85:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-toast",{attrs:{id:"msg_e",title:"ERROR",autoHideDelay:"5000",variant:"danger"}},[e._v(e._s(e.msg_error))]),r("b-toast",{attrs:{id:"msg_s",title:"Success",autoHideDelay:"5000",variant:"success"}},[e._v(e._s(e.msg_success))]),r("b-toast",{attrs:{id:"msg_w",title:"Warning!",autoHideDelay:"5000",variant:"warning"}},[e._v(e._s(e.msg_warning))])],1)},a=[],o={name:"Messages",props:["msg_error","msg_success","msg_warning"]},s=o,i=(r("153e"),r("2877")),u=Object(i["a"])(s,n,a,!1,null,"279231c2",null);t["a"]=u.exports}});
//# sourceMappingURL=app.59bc5e2a.js.map