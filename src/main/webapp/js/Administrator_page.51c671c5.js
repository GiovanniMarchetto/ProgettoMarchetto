(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Administrator_page"],{"137e":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[a("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill","first-number":"","last-number":"","prev-text":"Prev","next-text":"Next"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),a("b-col",{staticClass:"my-1",attrs:{sm:"4"}},[a("b-form-group",{attrs:{label:"Per page:","label-for":"per-page-select","label-cols-sm":"3"}},[a("b-form-select",{attrs:{id:"per-page-select",options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1)],1),a("b-table",{attrs:{striped:"","head-variant":"dark","table-variant":"secondary","sticky-header":"600px",responsive:"","current-page":e.currentPage,"per-page":e.perPage,items:e.items,fields:e.fields,"tbody-tr-class":e.highlightNew},scopedSlots:e._u([{key:"cell(logo)",fn:function(t){return[a("b-img",e._b({attrs:{src:""+t.item.logo,alt:"Logo uploader"}},"b-img",e.logoProps,!1))]}},{key:"cell(actions)",fn:function(t){return["listConsumers"===e.details||"listUploaders"===e.details||"listAdministrators"===e.details||"listResume"===e.details?a("b-button",{on:{click:t.toggleDetails}},[e._v(" "+e._s(t.detailsShowing?"Hide":"Show")+" Details ")]):e._e(),"listConsumers"===e.details||"listUploaders"===e.details?a("b-button",{attrs:{variant:"info"},on:{click:function(a){return e.$emit("mostraFiles",t.item.username)}}},[e._v("Mostra File")]):e._e(),"listFilesUploader"===e.details?a("b-button",{on:{click:function(a){return e.$emit("download-file",t.item.id)}}},[e._v(" Download ")]):e._e()]}},{key:"row-details",fn:function(t){return[a("b-card",[a("b-row",{staticClass:"mb-2"},[a("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[a("b",[e._v("Name:")])]),"listResume"===e.details?a("b-col",[e._v(e._s(t.item.nameUploader))]):e._e(),"listConsumers"===e.details||"listUploaders"===e.details||"listAdministrators"===e.details?a("b-col",[e._v(e._s(t.item.name))]):e._e()],1),a("b-row",{staticClass:"mb-2"},[a("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[a("b",[e._v("Email:")])]),"listResume"===e.details?a("b-col",[e._v(e._s(t.item.emailUploader))]):e._e(),"listConsumers"===e.details||"listUploaders"===e.details||"listAdministrators"===e.details?a("b-col",[e._v(e._s(t.item.email))]):e._e()],1)],1)]}}])}),0==e.items.length?a("div",[a("p",[e._v("Nessun elemento")])]):e._e()],1)},i=[],r={name:"Table",props:["items","fields","details"],data:function(){return{currentPage:1,perPage:5,pageOptions:[5,10,15,{value:100,text:"Troppi"}],logoProps:{rounded:"circle"}}},methods:{highlightNew:function(e,t){if(e&&"row"===t)return""===e.dataVisualizzazione?"table-warning":void 0}},computed:{totalRows:function(){return this.items.length}}},n=r,s=(a("2d16"),a("2877")),l=Object(s["a"])(n,o,i,!1,null,"4235dee8",null);t["a"]=l.exports},"147f":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Navbar",{attrs:{potere:e.ruolo,nomePrimaLista:"Resoconto",nomeSecondaLista:"Amministratori"},on:{mostraSezione:e.showSezione,ruoloForm:e.modificaRuoloForm}}),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.sezione,expression:"sezione == ''"}]},[a("h2",[e._v("Resoconto uploader")]),a("h3",[e._v(" Periodo selezionato (anno-mese-giorno): dal "+e._s(e.dateFromSelected)+" al "+e._s(e.dateToSelected)+" ")]),a("p",[e._v(" I file caricati il giorno d'inizio del periodo sono inclusi, quelli caricati il giorno di conclusione del periodo sono esclusi. ")]),a("b-form",{staticStyle:{"margin-bottom":"10px"},attrs:{inline:""},on:{submit:function(t){return t.preventDefault(),e.dataFilter(t)},reset:function(t){return t.preventDefault(),e.datesForLastMonth(t)}}},[a("DatesResume",{attrs:{dateFrom:e.dateFrom,dateTo:e.dateTo},on:{"change-info":e.change_home}}),a("b-button",{staticClass:"btn-inline",attrs:{type:"submit",variant:"outline-primary"}},[e._v("Resoconto")]),a("b-button",{staticClass:"btn-inline",attrs:{type:"reset",variant:"outline-danger"}},[e._v("Reset")])],1),a("Table",{attrs:{items:e.resume,fields:e.fieldsResume,details:"listResume"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"secondaLista"==e.sezione,expression:"sezione == 'secondaLista'"}]},[a("h2",[e._v("Lista degli Amministratori")]),a("Table",{attrs:{items:e.administrators,fields:e.fieldsListAdministrators,details:"listAdministrators"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"registration"==e.sezione,expression:"sezione == 'registration'"}]},[a("Registration",{attrs:{potere:e.ruolo,role:e.ruoloForm},on:{registrazione_utente:e.registrazione_utente_home,registrazione:e.showMsg}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"modInfo"==e.sezione,expression:"sezione == 'modInfo'"}]},[a("ModInfo",{attrs:{potere:e.ruolo,role:e.ruoloForm},on:{modInfo_utente:e.modInfo_utente_home,modInfo:e.showMsg}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"delete"==e.sezione,expression:"sezione == 'delete'"}]},[a("Delete",{attrs:{potere:e.ruolo,attoriOptions:e.attoriOptions},on:{delete_username:e.delete_username_home,delete:e.showMsg}})],1),a("Messages",{attrs:{msg_success:e.msg_success,msg_error:e.msg_error,msg_warning:e.msg_warning}}),a("Spinner",{attrs:{attesa:e.attesa}})],1)},i=[],r=(a("4de4"),a("c740"),a("4160"),a("b0c0"),a("d3b7"),a("25f0"),a("159b"),a("a37d")),n=a("6067"),s=a("137e"),l=a("be26"),c=a("afcd"),u=a("a11b"),d=a("fb85"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-form-group",[a("b-form-input",{attrs:{id:"dateFrom",name:"dateFrom",type:"date",required:""},nativeOn:{change:function(t){return e.change_info(t)}},model:{value:e.dateFrom,callback:function(t){e.dateFrom=t},expression:"dateFrom"}}),a("b-form-input",{attrs:{id:"dateTo",name:"dateTo",type:"date",required:""},nativeOn:{change:function(t){return e.change_info(t)}},model:{value:e.dateTo,callback:function(t){e.dateTo=t},expression:"dateTo"}})],1)},f=[],p=a("fa7d"),h={name:"DatesResume",props:["dateFrom","dateTo"],mixins:[p["a"]]},v=h,b=a("2877"),g=Object(b["a"])(v,m,f,!1,null,null,null),_=g.exports,w=a("62c3"),S=a.n(w);S.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken"));var x={name:"Administrator_page",components:{Navbar:r["a"],Table:s["a"],Registration:l["a"],ModInfo:c["a"],Delete:u["a"],DatesResume:_,Messages:d["a"],Spinner:n["a"]},mixins:[p["c"],p["d"]],data:function(){return{ruolo:"administrator",resume:[],administrators:[],dateFrom:"",dateTo:"",dateFromSelected:"",dateToSelected:"",ruoloForm:"",fieldsResume:["uploader",{key:"numDocCaricati",label:"#doc",sortable:!0},{key:"numConsDiversi",label:"#cons",sortable:!0},"actions"],fieldsListAdministrators:["username","actions"],attesa:!1}},computed:{attoriOptions:function(){var e=[];return this.resume.forEach((function(t){e.push(t.uploader)})),this.administrators.forEach((function(t){e.push(t.username)})),e}},methods:{change_home:function(e){var t=e.nameProp,a=e.valueProp;switch(t){case"dateFrom":this.dateFrom=a;break;case"dateTo":this.dateTo=a;break;default:break}},modificaRuoloForm:function(e){this.ruoloForm=e},registrazione_utente_home:function(e){var t=e.username,a=e.name,o=e.email,i=e.role,r=e.logo;if("administrator"===i){var n={username:t,name:a,email:o,logo:r};this.administrators.push(n)}else{var s={uploader:t,nameUploader:a,emailUploader:o,numDocCaricati:0,numConsDiversi:0};this.resume.push(s)}this.attoriOptions.push(t)},modInfo_utente_home:function(e){var t=e.utente,a=e.role;if("administrator"===a){var o=this.resume.findIndex((function(e){return e.uploader===t.username}));-1!==o&&(this.administrators[o].name=t.name,this.administrators[o].email=t.email)}else{var i=this.resume.findIndex((function(e){return e.uploader===t.username}));this.resume[i].nameUploader=t.name,this.resume[i].emailUploader=t.email}},delete_username_home:function(e){this.resume=this.resume.filter((function(t){return t.uploader!==e})),this.attoriOptions=this.attoriOptions.filter((function(t){return t!==e}))},dataFilter:function(){var e=this;this.attesa=!0,S.a.post("".concat("/api","/list/resumeForAdmin"),{from:this.dateFrom,to:this.dateTo}).then((function(t){e.resume=t.data,e.dateFromSelected=e.dateFrom,e.dateToSelected=e.dateTo,e.showMsg("Resoconto fornito")})).catch((function(t){return e.showMsg(t.toString())})).finally((function(){e.attesa=!1}))},datesForLastMonth:function(){var e=new Date;0==e.getMonth()?this.dateFrom=e.getFullYear()-1+"-12-01":e.getMonth()>9?this.dateFrom=e.getFullYear()+"-"+e.getMonth()+"-01":this.dateFrom=e.getFullYear()+"-0"+e.getMonth()+"-01",this.dateTo=e.toISOString().substring(0,8)+"01"}},created:function(){var e=this;this.datesForLastMonth(),this.dataFilter(),this.attesa=!0,S.a.get("".concat("/api","/list/administrators")).then((function(t){return e.administrators=t.data})).catch((function(t){return e.showMsg(t.toString())})).finally((function(){e.attesa=!1}))}},F=x,I=Object(b["a"])(F,o,i,!1,null,null,null);t["default"]=I.exports},"159b":function(e,t,a){var o=a("da84"),i=a("fdbc"),r=a("17c2"),n=a("9112");for(var s in i){var l=o[s],c=l&&l.prototype;if(c&&c.forEach!==r)try{n(c,"forEach",r)}catch(u){c.forEach=r}}},"17c2":function(e,t,a){"use strict";var o=a("b727").forEach,i=a("a640"),r=a("ae40"),n=i("forEach"),s=r("forEach");e.exports=n&&s?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,a){var o=a("d039"),i=a("b622"),r=a("2d00"),n=i("species");e.exports=function(e){return r>=51||!o((function(){var t=[],a=t.constructor={};return a[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"25f0":function(e,t,a){"use strict";var o=a("6eeb"),i=a("825a"),r=a("d039"),n=a("ad6d"),s="toString",l=RegExp.prototype,c=l[s],u=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=s;(u||d)&&o(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),a=e.flags,o=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?n.call(e):a);return"/"+t+"/"+o}),{unsafe:!0})},"2d16":function(e,t,a){"use strict";a("ab01")},4160:function(e,t,a){"use strict";var o=a("23e7"),i=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"4de4":function(e,t,a){"use strict";var o=a("23e7"),i=a("b727").filter,r=a("1dde"),n=a("ae40"),s=r("filter"),l=n("filter");o({target:"Array",proto:!0,forced:!s||!l},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},8418:function(e,t,a){"use strict";var o=a("c04e"),i=a("9bf2"),r=a("5c6c");e.exports=function(e,t,a){var n=o(t);n in e?i.f(e,n,r(0,a)):e[n]=a}},"99af":function(e,t,a){"use strict";var o=a("23e7"),i=a("d039"),r=a("e8b5"),n=a("861d"),s=a("7b0b"),l=a("50c4"),c=a("8418"),u=a("65f0"),d=a("1dde"),m=a("b622"),f=a("2d00"),p=m("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",b=f>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=d("concat"),_=function(e){if(!n(e))return!1;var t=e[p];return void 0!==t?!!t:r(e)},w=!b||!g;o({target:"Array",proto:!0,forced:w},{concat:function(e){var t,a,o,i,r,n=s(this),d=u(n,0),m=0;for(t=-1,o=arguments.length;t<o;t++)if(r=-1===t?n:arguments[t],_(r)){if(i=l(r.length),m+i>h)throw TypeError(v);for(a=0;a<i;a++,m++)a in r&&c(d,m,r[a])}else{if(m>=h)throw TypeError(v);c(d,m++,r)}return d.length=m,d}})},a11b:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",[e._v("Eliminazione")]),a("b-container",{attrs:{fluid:""}},[a("h3",[e._v("Elimina attore")]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.deleteActor(t)}}},[a("label",{attrs:{for:"username"}},[e._v("Username attore da eliminare")]),a("b-form-input",{attrs:{list:"attori-list",id:"username",type:"text",name:"username",placeholder:"username",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("b-form-datalist",{attrs:{id:"attori-list",options:e.attoriOptions}}),a("b-button",{attrs:{type:"submit",variant:"danger"}},[e._v("Elimina utente")])],1),a("p",[e._v(" NB: non puoi cancellare il tuo account ")])],1),"uploader"===e.potere?a("b-container",{attrs:{fluid:""}},[a("h3",[e._v("Elimina file")]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.deleteFile(t)}}},[a("label",{attrs:{for:"fileId"}},[e._v("Identificativo file da eliminare")]),a("b-form-input",{attrs:{list:"fileId-list",id:"fileId",type:"text",name:"fileId",placeholder:"id file",required:""},model:{value:e.fileId,callback:function(t){e.fileId=t},expression:"fileId"}}),a("b-form-datalist",{attrs:{id:"fileId-list",options:e.fileOptions}}),a("b-button",{attrs:{type:"submit",variant:"danger"}},[e._v("Elimina file")])],1),a("p",[e._v(" NB: puoi cancellare solo i file da te caricati ")])],1):e._e(),a("Spinner",{attrs:{attesa:e.attesa}})],1)},i=[],r=(a("99af"),a("d3b7"),a("6067")),n=a("62c3"),s=a.n(n);s.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken"));var l={name:"Delete",components:{Spinner:r["a"]},props:["potere","attoriOptions","fileOptions"],data:function(){return{username:"",fileId:"",attesa:!1}},methods:{deleteActor:function(){var e=this;this.attesa=!0,s.a.delete("".concat("/api","/attori/delete/").concat(this.username)).then((function(t){e.$emit("delete_username",e.username),e.username="",e.$emit("delete",t.data)})).catch((function(t){e.$emit("delete",t.response.data)})).finally((function(){e.attesa=!1}))},deleteFile:function(){var e=this;this.attesa=!0,s.a.delete("".concat("/api","/files/delete/").concat(this.fileId)).then((function(t){e.$emit("delete_file",e.fileId),e.fileId="",e.$emit("delete",t.data)})).catch((function(t){e.$emit("delete",t.err.response.data)})).finally((function(){e.attesa=!1}))}}},c=l,u=a("2877"),d=Object(u["a"])(c,o,i,!1,null,null,null);t["a"]=d.exports},a37d:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[a("b-navbar-brand",{on:{click:function(t){return e.$emit("mostraSezione","")}}},[e._v(e._s(e.potere)+" page")]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","")}}},[e._v(e._s(e.nomePrimaLista))]),a("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","secondaLista")}}},[e._v(e._s(e.nomeSecondaLista))]),"administrator"===e.potere?a("b-nav-item-dropdown",{attrs:{text:"Registra utente"}},[a("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","registration"),e.$emit("ruoloForm","administrator")}}},[e._v("Administrator")]),a("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","registration"),e.$emit("ruoloForm","uploader")}}},[e._v("Uploader")])],1):e._e(),"uploader"===e.potere?a("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","registration")}}},[e._v("Creare Consumer")]):e._e(),"consumer"===e.potere?a("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","modInfo")}}},[e._v("Modifica informazioni")]):a("b-nav-item-dropdown",{attrs:{text:"Modifica utente"}},["administrator"===e.potere?a("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","modInfo"),e.$emit("ruoloForm","administrator")}}},[e._v("Administrator")]):e._e(),a("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","modInfo"),e.$emit("ruoloForm","uploader")}}},[e._v("Uploader")]),"uploader"===e.potere?a("b-dropdown-item",{on:{click:function(t){e.$emit("mostraSezione","modInfo"),e.$emit("ruoloForm","consumer")}}},[e._v("Consumer")]):e._e()],1),"uploader"===e.potere?a("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","upload")}}},[e._v("Upload file")]):e._e(),"consumer"!==e.potere?a("b-nav-item",{on:{click:function(t){return e.$emit("mostraSezione","delete")}}},[e._v("Elimina")]):e._e()],1)],1)],1)},i=[],r={name:"Navbar",props:["potere","nomePrimaLista","nomeSecondaLista"]},n=r,s=a("2877"),l=Object(s["a"])(n,o,i,!1,null,null,null);t["a"]=l.exports},ab01:function(e,t,a){},ad6d:function(e,t,a){"use strict";var o=a("825a");e.exports=function(){var e=o(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},afcd:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",[e._v("Modifica informazioni")]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.modInfo(t)},reset:e.reset}},[a("Credenziali",{directives:[{name:"show",rawName:"v-show",value:"consumer"!=e.potere,expression:"potere != 'consumer'"}],attrs:{required:!1,username:e.username,password:e.password},on:{"change-info":e.change_home}}),a("UserInfo",{attrs:{required:!1,name:e.name,email:e.email},on:{"change-info":e.change_home}}),"uploader"===e.role?a("Logo",{attrs:{required:!1,logo:e.logo},on:{"change-info":e.change_home}}):e._e(),a("b-button",{attrs:{type:"submit",variant:"success"}},[e._v("Modifica informazioni")]),a("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1),a("section",[a("h3",[e._v("Istruzioni per la modifica")]),a("p",[e._v("Inserire i dati da modificare (non si puÃ² modificare l'username).")]),a("p",{directives:[{name:"show",rawName:"v-show",value:"consumer"!=e.potere,expression:"potere != 'consumer'"}]},[e._v(" Se si vuole modificare le informazioni di un altro utente immettere l'username. ")])]),a("Spinner",{attrs:{attesa:e.attesa}})],1)},i=[],r=(a("b0c0"),a("d3b7"),a("6067")),n=a("a4e7"),s=a("66e6"),l=a("278f"),c=a("fa7d"),u=a("62c3"),d=a.n(u);d.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken"));var m={name:"ModInfo",mixins:[c["b"]],props:["potere","role"],components:{Credenziali:n["a"],UserInfo:s["a"],Logo:l["a"],Spinner:r["a"]},data:function(){return{attesa:!1}},methods:{modInfo:function(){var e=this;this.attesa=!0,d.a.patch("".concat("/api","/attori/modInfo"),{username:this.username,password:this.password,name:this.name,email:this.email,role:this.role,logo:this.logo}).then((function(t){var a={utente:t.data,role:e.role};e.$emit("modInfo_utente",a),""!==e.username?e.$emit("modInfo","Modifica attore eseguita - "+e.username):e.$emit("modInfo","Modifica delle proprie informazioni eseguita"),e.reset()})).catch((function(t){e.$emit("modInfo",t.response.data)})).finally((function(){e.attesa=!1}))}}},f=m,p=a("2877"),h=Object(p["a"])(f,o,i,!1,null,"b9576780",null);t["a"]=h.exports},c740:function(e,t,a){"use strict";var o=a("23e7"),i=a("b727").findIndex,r=a("44d2"),n=a("ae40"),s="findIndex",l=!0,c=n(s);s in[]&&Array(1)[s]((function(){l=!1})),o({target:"Array",proto:!0,forced:l||!c},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=Administrator_page.51c671c5.js.map