(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Uploader_page"],{"0cb2":function(e,t,n){var a=n("7b0b"),i=Math.floor,o="".replace,r=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,l,u,c){var f=n+e.length,m=l.length,p=s;return void 0!==u&&(u=a(u),p=r),o.call(c,p,(function(a,o){var r;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(f);case"<":r=u[o.slice(1,-1)];break;default:var s=+o;if(0===s)return a;if(s>m){var c=i(s/10);return 0===c?a:c<=m?void 0===l[c-1]?o.charAt(1):l[c-1]+o.charAt(1):a}r=l[s-1]}return void 0===r?"":r}))}},"14c3":function(e,t,n){var a=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},5319:function(e,t,n){"use strict";var a=n("d784"),i=n("825a"),o=n("50c4"),r=n("a691"),s=n("1d80"),l=n("8aa5"),u=n("0cb2"),c=n("14c3"),f=Math.max,m=Math.min,p=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,n,a){var d=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=a.REPLACE_KEEPS_$0,g=d?"$":"$0";return[function(n,a){var i=s(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i,a):t.call(String(i),n,a)},function(e,a){if(!d&&h||"string"===typeof a&&-1===a.indexOf(g)){var s=n(t,e,this,a);if(s.done)return s.value}var v=i(e),x=String(this),b="function"===typeof a;b||(a=String(a));var _=v.global;if(_){var I=v.unicode;v.lastIndex=0}var C=[];while(1){var E=c(v,x);if(null===E)break;if(C.push(E),!_)break;var w=String(E[0]);""===w&&(v.lastIndex=l(x,o(v.lastIndex),I))}for(var F="",S=0,U=0;U<C.length;U++){E=C[U];for(var z=String(E[0]),R=f(m(r(E.index),x.length),0),y=[],O=1;O<E.length;O++)y.push(p(E[O]));var $=E.groups;if(b){var D=[z].concat(y,R,x);void 0!==$&&D.push($);var T=String(a.apply(void 0,D))}else T=u(z,x,R,y,$,a);R>=S&&(F+=x.slice(S,R)+T,S=R+z.length)}return F+x.slice(S)}]}))},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},9263:function(e,t,n){"use strict";var a=n("ad6d"),i=n("9f7f"),o=RegExp.prototype.exec,r=String.prototype.replace,s=o,l=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=i.UNSUPPORTED_Y||i.BROKEN_CARET,c=void 0!==/()??/.exec("")[1],f=l||c||u;f&&(s=function(e){var t,n,i,s,f=this,m=u&&f.sticky,p=a.call(f),d=f.source,h=0,g=e;return m&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),g=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(d="(?: "+d+")",g=" "+g,h++),n=new RegExp("^(?:"+d+")",p)),c&&(n=new RegExp("^"+d+"$(?!\\s)",p)),l&&(t=f.lastIndex),i=o.call(m?n:f,g),m?i?(i.input=i.input.slice(h),i[0]=i[0].slice(h),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:l&&i&&(f.lastIndex=f.global?i.index+i[0].length:t),c&&i&&i.length>1&&r.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),e.exports=s},"9f7f":function(e,t,n){"use strict";var a=n("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,n){"use strict";var a=n("23e7"),i=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},cdf3:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Navbar",{attrs:{potere:e.ruolo,nomePrimaLista:"Lista consumer",nomeSecondaLista:"File di un consumer"},on:{mostraSezione:e.showSezione,ruoloForm:e.modificaRuoloForm}}),n("div",{directives:[{name:"show",rawName:"v-show",value:""==e.sezione,expression:"sezione == ''"}]},[n("h2",[e._v("Lista Consumer")]),n("Table",{attrs:{items:e.consumers,fields:e.fieldsListConsumers,caricamentoDati:e.caricamentoDati},on:{mostraFiles:e.showFiles}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"secondaLista"==e.sezione,expression:"sezione == 'secondaLista'"}]},[n("h2",[e._v("Lista Files di "+e._s(e.consumerScelto))]),n("Table",{attrs:{items:e.filesConsumer,fields:e.fieldsListFileConsumer,caricamentoDati:e.caricamentoDati}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"registration"==e.sezione,expression:"sezione == 'registration'"}]},[n("Registration",{attrs:{potere:e.ruolo,role:"consumer"},on:{registrazione_utente:e.registrazione_utente_home,registrazione:e.showMsg}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"modInfo"==e.sezione,expression:"sezione == 'modInfo'"}]},[n("ModInfo",{attrs:{potere:e.ruolo,role:e.ruoloForm},on:{modInfo_utente:e.modInfo_utente_home,modInfo:e.showMsg}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"upload"==e.sezione,expression:"sezione == 'upload'"}]},[n("Upload",{on:{upload_consumer:e.upload_consumer_home,upload_file:e.upload_file_home,upload:e.showMsg}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"delete"==e.sezione,expression:"sezione == 'delete'"}]},[n("Delete",{attrs:{potere:e.ruolo,attoriOptions:e.attoriOptions,fileOptions:e.fileOptions},on:{delete_file:e.delete_file_home,delete_username:e.delete_username_home,delete:e.showMsg}})],1),n("Messages",{attrs:{msg_success:e.msg_success,msg_error:e.msg_error,msg_warning:e.msg_warning}})],1)},i=[],o=(n("159b"),n("4de4"),n("b0c0"),n("c740"),n("d3b7"),n("25f0"),n("a37d")),r=n("137e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Caricamento file")]),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.upload(t)},reset:function(t){return t.preventDefault(),e.reset(t)}}},[n("legend",[e._v("File")]),n("FileInput",{attrs:{file:e.file,nameFile:e.nameFile,hashtag:e.hashtag},on:{"update:file":function(t){e.file=t},"update:nameFile":function(t){e.nameFile=t},"update:name-file":function(t){e.nameFile=t},"update:hashtag":function(t){e.hashtag=t}}}),n("legend",[e._v("Dati Consumer destinatario")]),n("b-container",{attrs:{fluid:""}},[n("b-form-group",{attrs:{id:"usernameCons-group",label:"Username consumer:","label-for":"usernameCons"}},[n("b-form-input",{attrs:{id:"usernameCons",type:"text",name:"usernameCons",placeholder:"username consumer"},model:{value:e.usernameCons,callback:function(t){e.usernameCons=t},expression:"usernameCons"}})],1)],1),n("UserInfo",{attrs:{required:!1,name:e.nameCons,email:e.emailCons},on:{"update:name":function(t){e.nameCons=t},"update:email":function(t){e.emailCons=t}}}),n("b-button",{attrs:{type:"submit",variant:"success"}},[e._v("Upload")]),n("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1),n("Spinner",{attrs:{attesa:e.attesa}})],1)},l=[],u=n("6067"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-form-group",{attrs:{id:"fileInput-group",label:"File:","label-for":"fileInput"}},[n("b-form-file",{attrs:{id:"fileInput",type:"file",name:"fileInput",placeholder:"Scegli un file o trascinalo qui...",required:""},nativeOn:{change:function(t){return e.trasf64(t)}},model:{value:e.fileInput,callback:function(t){e.fileInput=t},expression:"fileInput"}})],1),n("b-form-group",{attrs:{id:"nameFileInput-group",label:"Nome del file:","label-for":"nameFileInput"}},[n("b-form-input",{attrs:{id:"nameFileInput",type:"text",name:"nameFileInput",placeholder:"name of file",required:""},model:{value:e.nameFileInput,callback:function(t){e.nameFileInput=t},expression:"nameFileInput"}})],1),n("b-form-group",{attrs:{id:"hashtagInput-group",label:"Hashtag:","label-for":"hashtagInput"}},[n("b-form-input",{attrs:{id:"hashtagInput",type:"text",name:"hashtagInput",placeholder:"some hashtag"},model:{value:e.hashtagInput,callback:function(t){e.hashtagInput=t},expression:"hashtagInput"}})],1)],1)},f=[],m=(n("5319"),n("ac1f"),{name:"FileInput",props:["file","nameFile","hashtag"],data:function(){return{fileInput:null}},computed:{fileStringInput:{get:function(){return this.file},set:function(e){this.$emit("update:file",e)}},nameFileInput:{get:function(){return this.nameFile},set:function(e){this.$emit("update:nameFile",e)}},hashtagInput:{get:function(){return this.hashtag},set:function(e){this.$emit("update:hashtag",e)}}},methods:{trasf64:function(e){var t=this,n=new FileReader;n.onload=function(e){t.fileStringInput=e.target.result.replace(/^data:.+;base64,/,"")},n.onerror=function(e){console.log("Error: ",e)},n.readAsDataURL(e.target.files[0]);var a=e.target.files[0].name,i=a.lastIndexOf(".");this.$emit("update:extension",a.substring(i))}}}),p=m,d=n("2877"),h=Object(d["a"])(p,c,f,!1,null,null,null),g=h.exports,v=n("66e6"),x=n("62c3"),b=n.n(x);null!=localStorage.getItem("jwtToken")&&(b.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken")));var _={name:"Upload",components:{FileInput:g,UserInfo:v["a"],Spinner:u["a"]},data:function(){return{file:"",nameFile:"",hashtag:"",extension:"",usernameCons:"",nameCons:"",emailCons:"",attesa:!1}},methods:{reset:function(){this.file="",this.extension="",this.nameFile="",this.hashtag="",this.usernameCons="",this.nameCons="",this.emailCons=""},upload:function(){var e=this;this.attesa=!0,b.a.post("".concat("/api","/files/upload"),{file:this.file,nameFile:this.nameFile+this.extension,hashtag:this.hashtag,usernameCons:this.usernameCons,nameCons:this.nameCons,emailCons:this.emailCons}).then((function(t){var n={username:e.usernameCons,name:e.nameCons,email:e.emailCons,logo:""};e.$emit("upload_consumer",n);var a=new Date,i={id:t.data,usernameUpl:localStorage.getItem("nomeUtente"),usernameCons:e.usernameCons,name:e.nameFile,dataCaricamento:a.toISOString().substring(0,10),dataVisualizzazione:"",indirizzoIP:"",hashtag:e.hashtag};e.$emit("upload_file",i),e.reset(),e.$emit("upload","Upload file completato ("+t.data+")")})).catch((function(t){e.$emit("upload",t.response.data)})).finally((function(){e.attesa=!1}))}}},I=_,C=Object(d["a"])(I,s,l,!1,null,null,null),E=C.exports,w=n("be26"),F=n("afcd"),S=n("a11b"),U=n("fb85"),z=n("fa7d");b.a.defaults.headers["Authorization"]="Bearer ".concat(localStorage.getItem("jwtToken"));var R={name:"Uploader_page",components:{Navbar:o["a"],Table:r["a"],Upload:E,Registration:w["a"],ModInfo:F["a"],Delete:S["a"],Messages:U["a"]},mixins:[z["b"],z["c"]],data:function(){return{ruolo:"uploader",ruoloForm:"",consumerScelto:null,consumers:[],filesUploader:[],filesConsumer:[],fieldsListConsumers:["name","files","details"],fieldsListFileConsumer:["id","name",{key:"dataCaricamento",sortable:!0},{key:"dataVisualizzazione",sortable:!0},"indirizzoIP","hashtag"],caricamentoDati:!1}},computed:{attoriOptions:function(){var e=[];return this.consumers.forEach((function(t){e.push(t.username)})),e},fileOptions:function(){var e=[];return this.filesUploader.forEach((function(t){e.push(t.id)})),e}},methods:{modificaRuoloForm:function(e){this.ruoloForm=e},showFiles:function(e){this.consumerScelto=e,this.filesConsumer=null,this.filesConsumer=this.filesUploader.filter((function(t){return t.usernameCons===e})),this.sezione="secondaLista"},registrazione_utente_home:function(e){var t=e.username,n=e.name,a=e.email,i=e.logo,o={username:t,name:n,email:a,logo:i};this.consumers.push(o),this.attoriOptions.push(t)},modInfo_utente_home:function(e){var t=e.utente,n=e.role;"consumer"===n&&(this.consumers=this.consumers.filter((function(e){return e.username!==t.username})),this.consumers.push(t))},upload_consumer_home:function(e){var t=e.usernameCons;-1===this.consumers.findIndex((function(e){return e.username===t}))&&(this.consumers.push(e),this.attoriOptions.push(t))},upload_file_home:function(e){this.filesUploader.push(e),e.usernameCons===this.consumerScelto&&this.filesConsumer.push(e),this.fileOptions.push(e.id)},delete_file_home:function(e){this.filesUploader=this.filesUploader.filter((function(t){return t.id!==e})),this.filesConsumer=this.filesConsumer.filter((function(t){return t.id!==e})),this.fileOptions=this.fileOptions.filter((function(t){return t!==e}))},delete_username_home:function(e){this.consumers=this.consumers.filter((function(t){return t.username!==e})),this.attoriOptions=this.attoriOptions.filter((function(t){return t!==e}))}},created:function(){var e=this;this.caricamentoDati=!0,b.a.get("".concat("/api","/list/consumers")).then((function(t){return e.consumers=t.data})).catch((function(t){return e.showMsg(t.toString())})),b.a.get("".concat("/api","/list/filesUploader")).then((function(t){return e.filesUploader=t.data})).catch((function(t){return e.showMsg(t.toString())})).finally((function(){e.caricamentoDati=!1}))}},y=R,O=Object(d["a"])(y,a,i,!1,null,null,null);t["default"]=O.exports},d784:function(e,t,n){"use strict";n("ac1f");var a=n("6eeb"),i=n("d039"),o=n("b622"),r=n("9263"),s=n("9112"),l=o("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c=function(){return"$0"==="a".replace(/./,"$0")}(),f=o("replace"),m=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var d=o(e),h=!i((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),g=h&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!h||!g||"replace"===e&&(!u||!c||m)||"split"===e&&!p){var v=/./[d],x=n(d,""[e],(function(e,t,n,a,i){return t.exec===r?h&&!i?{done:!0,value:v.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),b=x[0],_=x[1];a(String.prototype,e,b),a(RegExp.prototype,d,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}f&&s(RegExp.prototype[d],"sham",!0)}}}]);
//# sourceMappingURL=Uploader_page.22e4ef2b.js.map